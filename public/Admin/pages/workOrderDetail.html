<div id="page-wrapper">

    <div class="row" style="padding-top:20px">
        <div class="col-lg-12">
            <div id="tablePanel" class="panel panel-success">
                <div style="padding-left: 10px">
                    <h3>工单详情</h3>
                    <ul class="breadcrumb" style="background: none">
                        <li><a href="#/workOrderCenter">工单中心</a></li>
                        <li class="active">工单详情</li>
                    </ul>
                </div>
                <div class="panel-body">
                    <div class="col-lg-9" style="border-right: solid 1px #8585ad">

                        <div class="well well-sm">{{$ctrl.data.title}}</div>
                        <div class="well well-large">{{$ctrl.data.content}}</div>
                        <hr>
                        <h4>工单服务记录</h4>
                        <div>
                            <div class="well well-large">
                                <div ng-repeat="record in $ctrl.data.history">
                                        <span class="label label-danger">{{record.operation}}</span>
                                        <span class="label label-success">{{record.modifyBy}}</span>
                                        <span class="label label-default">{{record.operation !== '完结' ? '转交给' : ''}}</span>
                                        <span class="label label-success">{{record.nextAcceptor}}</span>
                                        <span class="label label-primary">备注: {{record.notes}}</span>
                                        <span class="text-muted pull-right" >{{record.MTime}}</span>
                                    </p>
                                    <hr ng-if="(($index+1)) !== $ctrl.data.history.length">
                                </div>
                            </div>
                        </div>
                        <hr>

                        <form ng-show="$ctrl.data.acceptor === $root.me.user">
                            <div class="form-group">
                                <textarea placeholder="请输入您的跟进结果" rows='5' class="form-control" ng-model="$ctrl.notes"></textarea>
                            </div>
                            <div class="form-group pull-right" ng-model="notes">
                                <button class="btn btn-success" ng-click="$ctrl.deliverWorkOrder()">转交工单</button>
                                <button class="btn btn-default" ng-click="$ctrl.finishWorkOrder()">完结工单</button>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-3">
                        <p><i class="fa fa-list fa-1x" aria-hidden="true"></i>&ensp;工单信息</p>
                        <p>工单号: {{$ctrl.data.id}}</p>
                        <p>创建时间: {{$ctrl.data.localeCTime}}</p>
                        <p>优先级: {{$ctrl.data.priority}}</p>
                        <br>
                        <p>发起人: {{$ctrl.data.initiator}}</p>
                        <p>受理人/组: {{$ctrl.data.acceptor}}</p>
                        <br>
                        <p>类别: {{$ctrl.data.category}}</p>
                        <p>状态: {{$ctrl.data.status}}</p>
                    </div>
                <!-- /.panel-body -->
                </div>
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
</div>
